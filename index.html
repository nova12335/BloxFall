<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Quiz</title>
<style>
body {
  background:#0b0b0b;
  color:#eaeaea;
  font-family: monospace;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
}
.container {
  transition: background 0.6s ease, transform 0.4s ease;
  width:520px;
  background:#141414;
  padding:24px;
  border-radius:14px;
}

/* MODOS VISUAIS */
body.caleb { background: linear-gradient(135deg, #0f3d1f, #1e7f3f); }
body.quean { background: linear-gradient(135deg, #ff8c1a, #ffb347); }
body.dark  { background: linear-gradient(135deg, #2b2b2b, #6a6a6a); }
body.thiago{ background: linear-gradient(135deg, #ffd400, #ffea70); color:#1a1a1a; }
body.mig   { background: linear-gradient(135deg, #ff4d4d, #ff9999); }

/* glitch para nova */
body.nova { animation: glitch 0.15s infinite; background:#000; }
@keyframes glitch {
  0% { transform: translate(0,0); }
  25% { transform: translate(-2px,2px); }
  50% { transform: translate(2px,-2px); }
  75% { transform: translate(-1px,1px); }
  100% { transform: translate(0,0); }
}

.shake { animation: shake 0.25s; }
@keyframes shake {
  0% { transform: translate(0); }
  25% { transform: translate(-5px); }
  50% { transform: translate(5px); }
  75% { transform: translate(-5px); }
  100% { transform: translate(0); }
}

h2 { font-size:20px; line-height:1.4; }
button {
  width:100%;
  margin-top:10px;
  padding:12px;
  background:#eaeaea;
  color:#000;
  border:none;
  border-radius:10px;
  cursor:pointer;
}
button:disabled { opacity:0.5; cursor:not-allowed; }
input {
  width:100%;
  padding:10px;
  margin-top:10px;
  background:#1e1e1e;
  color:#fff;
  border:none;
  border-radius:8px;
}
.hidden { display:none; }
</style>
</head>
<body>
<div class="container" id="container">
  <div id="start">
    <h2>Antes de come√ßar</h2>
    <input id="name" placeholder="Seu nome">
    <button id="startBtn">Come√ßar</button>
  </div>

  <div id="quiz" class="hidden">
    <h2 id="question"></h2>
    <div id="answers"></div>
  </div>

  <div id="end" class="hidden">
    <h2>aguarde um momento.</h2>
  </div>
</div>

<script>
const WEBHOOK_URL = "https://discord.com/api/webhooks/1450675654616940587/Mly3rECEozbuXdAa6go2xA_oML7fP9_Y8LwZSlFKjDwFzQySpVsSp78So7g4cAoLK8JF";

const answerMap = {
  "Muito positivo": 1,
  "Neutro": 0.5,
  "Confuso": 0.25,
  "Negativo": 0
};

const answersBase = ["Muito positivo", "Neutro", "Confuso", "Negativo"];
const migAnswers = [
  "tung tung sahur...",
  "banana atum ü§§",
  "hehehehe",
  "o bot mandou"
];

let questions = [];
let current = 0;
let username = "";
let log = [];
let score = 0;
let cooldown = false;
let mode = "";

function buildPersonalQuestions(m) {
  const sets = {
    quean: [
      "Voc√™ gosta quando algu√©m te deseja sem esconder?",
      "Voc√™ sente excita√ß√£o quando recebe aten√ß√£o intensa?",
      "Voc√™ prefere algu√©m direto ou que provoque devagar?",
      "Voc√™ gosta de sentir que √© necess√°rio para algu√©m?",
      "Voc√™ se sente confort√°vel quando algu√©m te quer s√≥ pra si?",
      "Voc√™ gosta de conversas que ficam quentes de repente?",
      "Voc√™ sente seu corpo reagir quando algu√©m te olha assim?",
      "Voc√™ gosta de intimidade sem pedir desculpa por isso?",
      "Voc√™ se sente poderoso quando √© desejado?",
      "Voc√™ gosta de ser provocado emocionalmente?",
      "Voc√™ se entrega f√°cil quando confia em algu√©m?",
      "Voc√™ gosta de quando a conversa fica pesada?",
      "Voc√™ sente vontade de se aproximar mais agora?",
      "Voc√™ gosta de tens√£o entre duas pessoas?",
      "Voc√™ se sente atra√≠do por intensidade emocional?",
      "Voc√™ gosta quando algu√©m fala o que quer de voc√™?",
      "Voc√™ se sente exposto quando algu√©m te l√™ f√°cil?",
      "Voc√™ gosta de n√£o saber onde isso vai dar?",
      "Voc√™ sente desejo misturado com confian√ßa?",
      "Voc√™ deixaria algu√©m te conduzir agora?"
    ],
    thiago: [
      "Tu t√° suave agora?",
      "Tu riu de alguma besteira hoje?",
      "Tu zoa mais do que devia?",
      "Se algu√©m te chama pra jogar agora tu vai?",
      "Tu prefere ganhar ou s√≥ rir?",
      "Tu se acha engra√ßado mesmo?",
      "Tu manda meme quando t√° mal?",
      "Tu consegue levar na zoeira?",
      "Tu se anima f√°cil?",
      "Tu fica tiltado r√°pido?",
      "Tu gosta de jogar em call?",
      "Tu fala besteira sem pensar?",
      "Tu curte companhia pra jogar?",
      "Tu se sente parte do grupo?",
      "Tu responde r√°pido quando quer?",
      "Tu joga s√©rio √†s vezes?",
      "Tu prefere coop ou x1?",
      "Tu ri de coisa idiota?",
      "Tu t√° de bom humor agora?",
      "Tu t√° curtindo isso aqui?"
    ],
    dark: [
      "Voc√™ est√° consciente do que sente agora?",
      "Voc√™ costuma esconder emo√ß√µes?",
      "Voc√™ sente tens√£o no corpo?",
      "Voc√™ se sente sobrecarregado?",
      "Voc√™ consegue nomear o que sente?",
      "Voc√™ se cobra demais?",
      "Voc√™ sente ansiedade frequente?",
      "Voc√™ consegue relaxar?",
      "Voc√™ se sente vazio √†s vezes?",
      "Voc√™ se permite sentir prazer?",
      "Voc√™ sente culpa sem motivo claro?",
      "Voc√™ percebe seus limites?",
      "Voc√™ se escuta quando algo incomoda?",
      "Voc√™ se sente presente agora?",
      "Voc√™ sente medo sem raz√£o?",
      "Voc√™ confia nos pr√≥prios pensamentos?",
      "Voc√™ consegue pedir ajuda?",
      "Voc√™ se sente seguro?",
      "Voc√™ se aceita como √©?",
      "Voc√™ sente equil√≠brio emocional?"
    ],
    caleb: [
      "Voc√™ segue ordens sem hesitar?",
      "Voc√™ mant√©m disciplina sob press√£o?",
      "Voc√™ controla emo√ß√µes em servi√ßo?",
      "Voc√™ prioriza o objetivo final?",
      "Voc√™ aceita hierarquia?",
      "Voc√™ age com firmeza?",
      "Voc√™ mant√©m postura?",
      "Voc√™ suporta rotina r√≠gida?",
      "Voc√™ executa a miss√£o at√© o fim?",
      "Voc√™ assume responsabilidade?",
      "Voc√™ lidera quando necess√°rio?",
      "Voc√™ mant√©m foco constante?",
      "Voc√™ aceita sacrif√≠cios?",
      "Voc√™ reage r√°pido?",
      "Voc√™ mant√©m ordem?",
      "Voc√™ confia na cadeia de comando?",
      "Voc√™ age sem questionar em combate?",
      "Voc√™ se considera um soldado?",
      "Voc√™ cumpre dever acima do conforto?",
      "Voc√™ conclui a tarefa?"
    ],
    mig: [
      "banana com atum hehehe ü§§ü§§ü§§ü§§",
      "e se eu comesse tijolo agora ü§î",
      "tu prefere comer areia ou sab√£o",
      "se eu gritar agora tu ouve",
      "isso aqui √© um quiz ou um sonho",
      "tu j√° tentou pensar",
      "macaco com gravata confia",
      "tu acha que peixe sabe matem√°tica",
      "se cair da cadeira ganha ponto",
      "isso faz sentido nenhum n√©",
      "tu piscou enquanto lia",
      "banana de novo üçå",
      "se eu falar hehehe tu responde",
      "tu t√° rindo sem motivo",
      "isso aqui √© s√©rio confia",
      "tu j√° esqueceu a pergunta",
      "tenta n√£o pensar agora",
      "se clicar errado explode",
      "isso aqui √© filosofia",
      "acabou a sanidade hehe"
    ]
  };
  if (!sets[m]) return [];
  return sets[m].map(q => ({ q, a: answersBase }));
}

function startQuiz() {
  current = 0; log = []; score = 0;
  const raw = document.getElementById("name").value || "";
  mode = raw.normalize("NFD").replace(/[^a-zA-Z]/g, "").toLowerCase();
  username = raw;

  const valid = ["quean","thiago","dark","caleb","nova","mig"];

  if (!valid.includes(mode)) {
    document.getElementById("question").innerText = "bote seu nome do roblox/discord, eu sei quem voce √©.";
    document.getElementById("start").classList.add("hidden");
    document.getElementById("quiz").classList.remove("hidden");
    setTimeout(()=>{
      document.getElementById("quiz").classList.add("hidden");
      document.getElementById("start").classList.remove("hidden");
    },3000);
    return;
  }

  if (mode === "nova") {
    document.body.className = "nova";
    document.getElementById("start").classList.add("hidden");
    document.getElementById("quiz").classList.remove("hidden");
    document.getElementById("question").innerText = "erro.";
    return;
  }

  document.body.className = mode;
  questions = buildPersonalQuestions(mode);

  document.getElementById("start").classList.add("hidden");
  document.getElementById("quiz").classList.remove("hidden");
  loadQuestion();
}

function loadQuestion() {
  if (!questions[current]) return finishQuiz();
  document.getElementById("question").innerText = questions[current].q;
  const answers = document.getElementById("answers");
  answers.innerHTML = "";

  if (mode === "mig") {
    answers.style.position = "relative";
    answers.style.height = "260px";
    migAnswers.forEach(text => {
      const b = document.createElement("button");
      b.innerText = text;
      b.style.position = "absolute";
      b.style.width = "auto";
      b.style.padding = "10px 14px";
      b.style.left = Math.random() * 70 + "%";
      b.style.top = Math.random() * 70 + "%";
      b.onclick = () => selectAnswer("Confuso");
      answers.appendChild(b);
    });
    return;
  }

  answers.style.position = "static";
  answersBase.forEach(text => {
    const b = document.createElement("button");
    b.innerText = text;
    b.onclick = () => selectAnswer(text);
    answers.appendChild(b);
  });
}

function react(txt) {
  const q = document.getElementById("question");
  q.innerText = txt;
  document.getElementById("container").classList.add("shake");
  setTimeout(()=>document.getElementById("container").classList.remove("shake"),400);
}

function selectAnswer(text) {
  if (cooldown) return;
  cooldown = true;
  setTimeout(()=>cooldown=false,2000);

  score += answerMap[text] || 0;
  log.push(`Q${current+1}: ${text}`);

  if (mode === "quean" && text === "Muito positivo") react("‚ù§");
  if (mode === "thiago" && text === "Muito positivo") react("kkkk");
  if (mode === "caleb" && (text === "Muito positivo" || text === "Neutro")) react("Entendido.");
  if (mode === "mig") react("???");

  current++;
  setTimeout(loadQuestion,600);
}

function finishQuiz() {
  document.getElementById("quiz").classList.add("hidden");
  document.getElementById("end").classList.remove("hidden");

  const percent = Math.round((score / questions.length) * 100);
  let result = "";

  if (mode === "quean") result = `Amor: ${percent}%`;
  if (mode === "caleb") result = `Soldado: ${percent}%`;
  if (mode === "dark") result = `Estabilidade: ${percent}%`;
  if (mode === "thiago") result = `Conex√£o: ${percent}%`;
  if (mode === "mig") result = `QI funcional: ${percent}%`;

  fetch(WEBHOOK_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({content:`${username}\n${result}\n${log.join("\n") || "(sem respostas)"}`})
  });
}

// Testes b√°sicos
console.assert(typeof startQuiz === 'function', 'startQuiz deve existir');
console.assert(Array.isArray(buildPersonalQuestions('quean')), 'Quean deve gerar perguntas');
console.assert(buildPersonalQuestions('invalido').length === 0, 'Modo inv√°lido n√£o deve gerar perguntas');

// teste extra: mig gera 20 perguntas
console.assert(buildPersonalQuestions('mig').length === 20, 'Mig deve ter 20 perguntas');

document.getElementById("startBtn").onclick = startQuiz;
</script>
</body>
</html>
