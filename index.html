<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>O Bat Test do Neko-N√≠vel - Vers√£o üíÄ</title>
<style>
    /* Vari√°vel CSS para a cor de fundo */
    :root {
        --bg-color: #1a1a22; 
    }

    body {
        margin: 0;
        height: 100vh;
        /* Usa a vari√°vel e aplica transi√ß√£o */
        background: linear-gradient(135deg, #0f0f14, var(--bg-color)); 
        transition: background-color 2s ease, background 2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: 'Segoe UI', sans-serif;
        color: #fff;
    }

    .card {
        width: 480px;
        background: rgba(255,255,255,0.04);
        border-radius: 16px;
        padding: 32px;
        box-shadow: 0 20px 40px rgba(0,0,0,0.4);
        backdrop-filter: blur(10px);
        animation: fadeIn 0.6s ease;
        transition: opacity 1s ease; /* Para o fade-out final */
    }

    h1 {
        font-size: 20px;
        margin-bottom: 24px;
        text-align: center;
        font-weight: 600;
        transition: color 1s ease;
    }
    
    .question-counter {
        text-align: center;
        margin-bottom: 15px;
        font-size: 14px;
        color: rgba(255, 255, 255, 0.7);
    }

    .option {
        margin: 12px 0;
        padding: 14px;
        background: rgba(255,255,255,0.06);
        border-radius: 12px;
        cursor: pointer;
        transition: 0.2s;
        text-align: center;
        line-height: 1.3;
    }

    .option:hover {
        background: rgba(255,255,255,0.14);
        transform: scale(1.02);
    }

    .progress {
        height: 6px;
        background: rgba(255,255,255,0.1);
        border-radius: 6px;
        overflow: hidden;
        margin-bottom: 20px;
    }

    .bar {
        height: 100%;
        width: 0%;
        background: linear-gradient(90deg, #ec4899, #f97316); 
        transition: width 0.4s;
    }

    /* Estilo para a tela de "fechamento" */
    .closing-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: black;
        display: none; /* Escondido inicialmente */
        align-items: center;
        justify-content: center;
        flex-direction: column;
        z-index: 100;
        opacity: 0;
        transition: opacity 2s ease;
    }
</style>
</head>
<body>

<div class="card" id="quizCard">
    <div class="progress"><div class="bar" id="bar"></div></div>
    <div class="question-counter" id="counter"></div>
    <h1 id="question"></h1>
    <div id="options"></div>
</div>

<div class="closing-screen" id="closingScreen">
    <h1 style="font-size: 24px;">FIM.</h1>
    <p style="color: #666; font-size: 16px;">Obrigado por jogar, [Nome do Usu√°rio].</p>
</div>

<script>
// Array de Perguntas do Neko Bat Test ORIGINAL (15 perguntas)
const questions = [
    // q: Pergunta
    // vA, vB: Pontos
    // a, b: Op√ß√µes
    { q: "1. Que tipo de m√∫sica de fundo voc√™ prefere para estudar ou trabalhar?", a: "Sons de chuva", vA: 4, b: "Sil√™ncio absoluto", vB: 1 },
    { q: "2. Como voc√™ reage a um abra√ßo surpresa?", a: "Me derreto no abra√ßo e demoro a soltar", vA: 5, b: "Fico um pouco sem jeito, mas retribuo rapidamente", vB: 2 },
    { q: "3. Qual √© a sua bebida ideal para uma noite fria?", a: "Ch√°/Chocolate Quente com marshmallow", vA: 3, b: "Caf√© Preto forte", vB: 0 },
    { q: "4. Ao ver uma embalagem fofa, como um sabonete em forma de estrela, o que voc√™ faz?", a: "Compro e guardo, tenho pena de usar", vA: 5, b: "Acho engra√ßado, mas uso no mesmo dia", vB: 1 },
    { q: "5. Qual √© o seu acess√≥rio preferido para o cabelo (mesmo que n√£o o use)?", a: "Uma bandolete/tiara com orelhas", vA: 3, b: "Um simples el√°stico", vB: 0 },
    
    // IN√çCIO DO CLINGY/PESSOAL E IN√çCIO DO TOM MAIS ESCURO (Escurecendo o fundo a partir daqui)
    { q: "6. Em uma esplanada com amigos, onde voc√™ se senta?", a: "No meio, para ouvir todas as conversas e me sentir inclu√≠do", vA: 4, b: "Na ponta, com as costas para a parede, observando", vB: 1 },
    { q: "7. O que voc√™ acha de emojis animados, como aqueles que piscam ou fazem cora√ß√µes?", a: "Uso sempre! Adoro expressar-me com eles", vA: 5, b: "Uso muito raramente", vB: 2 },
    { q: "8. Qual √© a sua abordagem para pedir algo a algu√©m?", a: "Come√ßo com um 'Por favorzinho...' e fa√ßo um sorriso", vA: 4, b: "Pe√ßo diretamente e claramente", vB: 1 },
    { q: "9. Qual √© o seu grau de toler√¢ncia a pequenos barulhos, como um pingar constante?", a: "Zero, tenho que arranjar ou calar imediatamente", vA: 5, b: "Consigo ignorar por um tempo", vB: 2 },
    { q: "10. Voc√™ tem uma pe√ßa de roupa super confort√°vel que j√° devia ter deitado fora?", a: "Sim, a minha 'roupa de abra√ßo' preferida", vA: 4, b: "N√£o, deito fora assim que ficar gasta", vB: 1 },
    
    // IN√çCIO DO CALEB E CRESCIMENTO DO CREEPY
    { q: "11. Se for para ver um filme, voc√™... Voc√™ consegue sentir quando Caleb est√° te observando?", a: "Prefere ver no colo ou lado a lado, mesmo que n√£o interaja", vA: 5, b: "N√£o se importa de ver numa cadeira separada", vB: 0 },
    { q: "12. Qual √© o seu sentimento dominante ao ver um animal de estima√ß√£o? Ou, como Caleb descreveria a sua pele?", a: "Uma vontade irresist√≠vel de fazer festinhas e apertar", vA: 5, b: "Uma sensa√ß√£o de paz e admira√ß√£o", vB: 2 },
    { q: "13. Qual √© o tipo de notifica√ß√£o no telem√≥vel que mais o satisfaz? Voc√™ est√° sozinho agora, n√£o est√°?", a: "Uma mensagem de um amigo querido", vA: 4, b: "Uma notifica√ß√£o de que um objetivo foi alcan√ßado", vB: 1 },
    { q: "14. Voc√™ √© de fazer birra (leve) para conseguir o que quer? Caleb gosta da sua honestidade.", a: "Sim, com um pouco de charme e manha", vA: 3, b: "N√£o, sou maduro(a) e resolvo de outra forma", vB: 0 },
    
    // PERGUNTA FINAL
    { q: "15. Qual √© a sua rea√ß√£o a um espelho de casa de banho embaciado? ... Ele sabe o que voc√™ vai escolher.", a: "Desenha um cora√ß√£o ou uma carinha feliz", vA: 5, b: "Limpa para ver a sua imagem", vB: 1 }
];

let index = 0;
let score = 0;

const qEl = document.getElementById("question");
const oEl = document.getElementById("options");
const bar = document.getElementById("bar");
const counterEl = document.getElementById("counter");
const root = document.documentElement; // Para acessar vari√°veis CSS
const quizCard = document.getElementById("quizCard");
const closingScreen = document.getElementById("closingScreen");

function updateBackground(qIndex) {
    // 0 a 4: Normal
    // 5 a 9: Come√ßa a escurecer (de 26,26,34 para 17,17,17)
    // 10 a 14: Escuro
    
    let baseColor = 34; // Cor inicial do cinza (22 em hex)
    
    if (qIndex >= 5) {
        // Calcular o qu√£o escuro deve estar
        let progress = (qIndex - 5) / (questions.length - 5); // 0.0 a 1.0
        // Mapeia o cinza de 34 para 17 (11 em hex)
        let newColorValue = Math.max(17, Math.floor(baseColor - (baseColor - 17) * progress));
        
        // Converte o valor decimal para hexadecimal (com padding)
        let hexColor = newColorValue.toString(16).padStart(2, '0');
        
        // Define a nova cor de fundo mais escura
        root.style.setProperty('--bg-color', `#${hexColor}${hexColor}${hexColor}`);
        
        // Faz o texto da pergunta ficar ligeiramente menos vis√≠vel (mais preto no h1)
        if (qIndex >= 10) {
            qEl.style.color = '#ccc';
        }
    }
}


function load() {
    updateBackground(index);
    if (index >= questions.length) return result();

    const current = questions[index];
    
    counterEl.innerText = `Pergunta ${index + 1} de ${questions.length}`;

    qEl.innerText = current.q;
    oEl.innerHTML = "";

    const options = [
        { text: current.a, value: current.vA },
        { text: current.b, value: current.vB }
    ];

    // Verifica se √© a √∫ltima pergunta para a a√ß√£o de "fechamento"
    const isLastQuestion = (index === questions.length - 1);

    options.forEach(option => {
        const div = document.createElement("div");
        div.className = "option";
        
        // Na √∫ltima pergunta, removemos a exibi√ß√£o dos pontos para manter o suspense
        div.innerText = isLastQuestion 
            ? option.text 
            : option.text + ` (${option.value} pontos)`;
        
        div.onclick = () => {
            score += option.value;
            index++;
            bar.style.width = (index / questions.length * 100) + "%";
            
            if (isLastQuestion) {
                // Se for a √∫ltima, inicia o efeito de fechar
                closeSiteEffect();
            } else {
                load();
            }
        };
        oEl.appendChild(div);
    });
}

function closeSiteEffect() {
    // 1. Esconde o quiz com fade-out
    quizCard.style.opacity = '0';
    
    // 2. Transiciona o fundo do corpo para preto absoluto
    root.style.setProperty('--bg-color', '#000');
    document.body.style.backgroundColor = 'black';

    setTimeout(() => {
        // 3. Oculta o quiz completamente e mostra a tela de encerramento
        quizCard.style.display = 'none';
        closingScreen.style.display = 'flex';
        
        // 4. Faz a tela de encerramento aparecer lentamente
        setTimeout(() => {
            closingScreen.style.opacity = '1';
        }, 50);

        // O navegador n√£o permite fechar, ent√£o a tela preta com a mensagem simula o encerramento.
    }, 1500); // D√° tempo para o fade-out (1.5s)
}

// A fun√ß√£o result() normal n√£o √© mais chamada, mas vou mant√™-la para o caso de debug.
function result() {
    // ... C√≥digo de resultado original que n√£o ser√° mais executado
}

load();
</script>

</body>
</html>
