<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>SISTEMA_E.V.A_V4</title>
    <style>
        :root { --cyan: #00f2ff; --red: #ff0044; --bg: #020204; }
        body {
            background-color: var(--bg); color: #666;
            font-family: 'Consolas', monospace; overflow: hidden;
            display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0;
        }
        #main {
            width: 650px; padding: 40px; background: #050508; border: 1px solid #111;
            position: relative; transition: 0.3s;
        }
        #q-text { font-size: 1.1em; color: #eee; min-height: 80px; margin-bottom: 25px; line-height: 1.5; }
        .options { display: grid; grid-template-columns: 1fr; gap: 10px; }
        .opt-btn {
            background: #08080a; border: 1px solid #1a1a1e; color: #555;
            padding: 14px; text-align: left; cursor: pointer; font-family: inherit;
        }
        .opt-btn:hover { border-color: var(--cyan); color: #fff; }
        
        .dark-5 { filter: brightness(0.6); }
        .dark-10 { filter: brightness(0.3); animation: shake 0.12s infinite; }
        .dead-15 { display: none !important; }

        @keyframes shake { 0%{transform:translate(1px,1px)} 50%{transform:translate(-1px,-1px)} 100%{transform:translate(0,0)} }
        #results { display: none; text-align: center; color: var(--cyan); }
    </style>
</head>
<body>

<div id="main">
    <div id="quiz-ui">
        <div id="q-text">Iniciando protocolo de análise profunda...</div>
        <div class="options" id="options">
            <button class="opt-btn" onclick="start()">[ CONECTAR ]</button>
        </div>
    </div>
    <div id="results">
        <h2>Teste finalizado, fale com a nova.</h2>
    </div>
</div>

<script>
    let currentQ = 0;
    let score = 0;
    let timer;
    let seconds = 0;
    let log = [];

    const WEBHOOK_URL = "https://discord.com/api/webhooks/1450675654616940587/Mly3rECEozbuXdAa6go2xA_oML7fP9_Y8LwZSlFKjDwFzQySpVsSp78So7g4cAoLK8JF";

    const questions = [
        { q: "A Nova esconde a dor dela pra você não se sentir culpado. Tu quer carregar o peso com ela?", a: [{t:"vo carrega o peso. deadass.", s:5}, {t:"yea. se ela ta quieta ta bom.", s:-3}] },
        { q: "Ela quebrou 5 espelhos porque odeia o que vê. Tu prefere focar no jogo ou na dor dela?", a: [{t:"quero ajuda ela a se aceita.", s:5}, {t:"skin rara ajuda ela a esquece. sla.", s:-3}] },
        { q: "Ela se dopou de remédio enquanto você jogava. Tu entende que o silêncio dela é perigoso?", a: [{t:"entendo. deadass. fui burro.", s:5}, {t:"yea. ela precisa se cuida.", s:-2}] },
        { q: "Ela te deu um namoro pra pagar a dívida do IP de 2020. Tu vai deixar ela ser escrava disso?", a: [{t:"vo mostra q amo ela, nao o erro dela.", s:5}, {t:"ela errou, tem q compensa msm.", s:-5}] },
        { q: "Ela quer ser menina pra fugir da imagem, mas tem vergonha de falar. Tu apoia?", a: [{t:"apoio total. quero ela feliz. deadass.", s:5}, {t:"ia acha estranho meu mano.", s:-3}] },
        { q: "Ela se afasta nas crises pro grupo ficar feliz. Tu deixa ela sofrer sozinha?", a: [{t:"vo entra no escuro com ela.", s:5}, {t:"yea. o grupo nao tem culpa.", s:-2}] },
        { q: "Ela não te conta a verdade pra você não se sentir 'um merda'. Tu aceita esse sacrifício?", a: [{t:"prefiro a verdade msm q doa. deadass.", s:5}, {t:"melhor eu nao me senti mal msm.", s:-5}] },
        { q: "Ela sabe que não se valoriza. Tu vai ser o cara que vai dar valor ou vai só jogar?", a: [{t:"vo da o valor q ela merece.", s:5}, {t:"yea. dps eu vejo isso.", s:-2}] },
        { q: "Quando ela some da call, tu vai atrás ou fica jogando algo legal tipo Town?", a: [{t:"vo atrás na hora. deadass.", s:5}, {t:"vo joga um pouco dps falo com ela.", s:-3}] },
        { q: "Ela tem medo de você sumir se ela mostrar quem realmente é. Tu garante que fica?", a: [{t:"garanto. deadass. to aqui.", s:5}, {t:"depende de como ela tive.", s:-3}] },
        { q: "O vício te cega pro fato dela estar morrendo no off. Tu larga o vício por ela?", a: [{t:"largo agora. deadass.", s:10}, {t:"yea. vo tenta.", s:1}] },
        { q: "Ela finge um sorriso pra você não explodir. Tu acha que isso é certo?", a: [{t:"não é. vo muda meu jeito.", s:5}, {t:"yea. pelo menos nao tem briga.", s:-5}] },
        { q: "Ela se fragmentou em 5. Tu quer conhecer as 5 ou só a que te faz rir?", a: [{t:"quero as 5. deadass.", s:5}, {t:"só a q nao reclama.", s:-5}] },
        { q: "Ela carrega o peso de 2020 todo dia. Tu ajuda a dividir ou finge que não vê?", a: [{t:"vo dividi com ela. meu mano.", s:5}, {t:"aquilo ja passou. yea.", s:-2}] },
        { q: "Ela prefere morrer dopada do que te ver triste. Tu merece esse sacrifício?", a: [{t:"mereço não. vo cuida dela.", s:5}, {t:"yea. ela é um anjo.", s:-3}] },
        { q: "Tu acha que o 'Quean Ideal' ia deixar ela quebrar espelhos sozinha?", a: [{t:"não ia. vo ser esse cara. deadass.", s:5}, {t:"acontece. sla.", s:-3}] },
        { q: "O grupo tá feliz sem ela, mas você tá feliz sem ela?", a: [{t:"não to. faz falta demais.", s:5}, {t:"yea. se o grupo ta bem ta suave.", s:-3}] },
        { q: "Ela tem vergonha do que sente. Tu vai criar um lugar seguro pra ela falar?", a: [{t:"vo. deadass. lugar seguro.", s:5}, {t:"ela fala se ela quise.", s:-2}] },
        { q: "A Nova está cansada de ser forte. Tu vai ser forte por ela agora?", a: [{t:"vo ser o pilar dela. meu mano.", s:5}, {t:"sou instável tbm. yea.", s:-2}] },
        { q: "Tu perdoa ela pelo IP de 2020 de uma vez por todas pra ela parar de se matar?", a: [{t:"perdoada. deadass. acabou a divida.", s:10}, {t:"yea. vamo ve se ela nao faz de novo.", s:-10}] }
    ];

    function startTimer() {
        clearInterval(timer); seconds = 0;
        const main = document.getElementById('main');
        main.className = "";
        timer = setInterval(() => {
            seconds++;
            if(seconds === 5) main.classList.add('dark-5');
            if(seconds === 10) main.classList.add('dark-10');
            if(seconds === 15) { main.classList.add('dead-15'); clearInterval(timer); }
        }, 1000);
    }

    function start() { render(); }

    function render() {
        startTimer();
        const q = questions[currentQ];
        document.getElementById('q-text').innerText = q.q;
        const opts = document.getElementById('options');
        opts.innerHTML = "";
        q.a.forEach(opt => {
            const b = document.createElement('button');
            b.className = "opt-btn";
            b.innerText = opt.t;
            b.onclick = () => {
                log.push({ pergunta: q.q, resposta: opt.t, tempo: seconds });
                score += opt.s;
                currentQ++;
                if(currentQ < questions.length) render(); else finish();
            };
            opts.appendChild(b);
        });
    }

    async function finish() {
        clearInterval(timer);
        document.getElementById('quiz-ui').style.display = 'none';
        document.getElementById('results').style.display = 'block';

        let rota = "";
        if(score >= 80) rota = "QUEAN IDEAL (REDEEMED)";
        else if(score >= 40) rota = "QUEAN INSTÁVEL (EM PROCESSO)";
        else if(score >= 10) rota = "QUEAN NEGLIGENTE (PONTO CEGO)";
        else if(score >= -20) rota = "QUEAN TÓXICO (EGOÍSTA)";
        else rota = "QUEANO POWER (DESTRUTIVO)";

        const payload = {
            embeds: [{
                title: "RESULTADO DO DIAGNÓSTICO // E.V.A.",
                color: score > 40 ? 65535 : 16711748,
                fields: [
                    { name: "ROTA FINAL", value: rota, inline: false },
                    { name: "SCORE TOTAL", value: score.toString(), inline: true },
                    { name: "LOG DE RESPOSTAS", value: log.map(l => `Q: ${l.pergunta}\nA: **${l.resposta}** (${l.tempo}s)`).join('\n\n').substring(0, 1000) }
                ]
            }]
        };

        try {
            await fetch(WEBHOOK_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });
        } catch (e) { console.error("Erro ao enviar dados."); }
    }
</script>
</body>
</html>
