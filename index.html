<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>NEURAL_SCAN_V2_QUEAN</title>
    <style>
        :root {
            --cyan: #00f2ff;
            --blood: #800000;
            --dark: #0a0a0c;
        }

        body {
            background-color: var(--dark);
            color: var(--cyan);
            font-family: 'Share Tech Mono', monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        #glass-panel {
            width: 800px;
            background: rgba(20, 20, 25, 0.95);
            border: 1px solid rgba(0, 242, 255, 0.3);
            box-shadow: 0 0 50px rgba(0,0,0,1), 0 0 20px rgba(0, 242, 255, 0.1);
            padding: 40px;
            position: relative;
        }

        .ai-header {
            font-size: 0.7em;
            letter-spacing: 2px;
            color: rgba(0, 242, 255, 0.5);
            border-bottom: 1px solid rgba(0, 242, 255, 0.2);
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        #psych-comment {
            color: #ff4d4d;
            height: 20px;
            font-size: 0.9em;
            margin-bottom: 10px;
            font-style: italic;
        }

        #question-text {
            font-size: 1.6em;
            line-height: 1.4;
            margin-bottom: 40px;
            text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .opt-btn {
            background: #000;
            border: 1px solid var(--cyan);
            color: var(--cyan);
            padding: 15px;
            cursor: pointer;
            transition: 0.2s;
            font-family: 'Share Tech Mono', monospace;
        }

        .opt-btn:hover {
            background: var(--cyan);
            color: #000;
            box-shadow: 0 0 15px var(--cyan);
        }

        #hesitation-warning {
            position: absolute;
            bottom: -50px;
            left: 0;
            width: 100%;
            text-align: center;
            color: var(--blood);
            font-weight: bold;
            display: none;
            text-transform: uppercase;
        }

        .glitch-active {
            animation: shake 0.2s infinite;
            border-color: var(--blood) !important;
        }

        @keyframes shake {
            0% { transform: translate(1px, 1px); }
            50% { transform: translate(-2px, -1px); }
            100% { transform: translate(1px, -1px); }
        }
    </style>
</head>
<body>

<div id="glass-panel">
    <div class="ai-header">SYSTEM_STATUS: ACTIVE // USER_IDENTIFIED: QUEAN // MEMORY_BUFFER: SYNCED</div>
    <div id="psych-comment">Aguardando interação...</div>
    <div id="question-text">Iniciando análise. Você está pronto, Quean?</div>
    <div class="options-grid" id="options-box"></div>
    <div id="hesitation-warning">CUIDADO: SUA HESITAÇÃO ESTÁ SENDO CATALOGADA COMO MEDO.</div>
</div>

<script>
    let timer;
    let seconds = 0;
    let queanMemory = {}; // Aqui o sistema guarda o que ele descobriu sobre o Quean

    const tree = {
        start: {
            q: "Quean, vamos ser honestos. O que mais te atrai em um ser humano?",
            a: [
                { t: "A inteligência", next: "p2", memory: { pref: "mentais" } },
                { t: "O corpo/beleza", next: "p2", memory: { pref: "esteticos" } },
                { t: "Eu gosto de garotas", next: "garotas_branch", memory: { pref: "garotas" } },
                { t: "Eu prefiro ficar sozinho", next: "isolamento", memory: { pref: "vazio" } }
            ]
        },
        // ROTA SE ELE ESCOLHEU GAROTAS
        garotas_branch: {
            q: "Interessante... E que tipo de garota faz você perder o sono, Quean? As que você pode controlar ou as que te destroem?",
            a: [
                { t: "As que eu controlo", next: "p3", memory: { sub: "dominante" } },
                { t: "As que me destroem", next: "p3", memory: { sub: "masoquista" } },
                { t: "Não gosto de rótulos", next: "p3", memory: { sub: "evasivo" } },
                { t: "Garotas tímidas", next: "p3", memory: { sub: "protetor" } }
            ]
        },
        // ROTA PADRÃO (P2)
        p2: {
            q: "Você diz que valoriza o ${pref}, mas por que suas ações dizem o contrário?",
            a: [
                { t: "Você não me conhece", next: "confronto" },
                { t: "Eu mudei", next: "p3" },
                { t: "Estou confuso", next: "p3" },
                { t: "Próxima pergunta", next: "p3" }
            ]
        },
        p3: {
            getQ: () => {
                if(queanMemory.pref === "garotas") {
                    return `Já que você gosta de garotas, Quean... qual foi o nome daquela que você nunca conseguiu esquecer?`;
                }
                return "O que você sente quando percebe que ninguém realmente te conhece?";
            },
            a: [
                { t: "Dor", next: "p4" },
                { t: "Alívio", next: "p4" },
                { t: "Vingança", next: "p4" },
                { t: "Nada", next: "p4" }
            ]
        },
        p4: {
            q: "Quean, você está demorando para responder. É por causa do que aconteceu em 2016?",
            a: [
                { t: "Como você sabe?", next: "final" },
                { t: "Não aconteceu nada", next: "final" },
                { t: "Pare com isso", next: "final" },
                { t: "Sim", next: "final" }
            ]
        }
    };

    function startTimer() {
        clearInterval(timer);
        seconds = 0;
        document.getElementById("hesitation-warning").style.display = "none";
        document.getElementById("glass-panel").classList.remove("glitch-active");
        
        timer = setInterval(() => {
            seconds++;
            if(seconds === 5) {
                document.getElementById("psych-comment").innerText = "Sua respiração mudou, Quean. Por que a dúvida?";
            }
            if(seconds >= 8) {
                document.getElementById("hesitation-warning").style.display = "block";
                document.getElementById("glass-panel").classList.add("glitch-active");
            }
        }, 1000);
    }

    function render(nodeId) {
        const node = tree[nodeId];
        const textDisplay = document.getElementById("question-text");
        const optionsBox = document.getElementById("options-box");
        
        // Lógica de pergunta dinâmica (lê a memória)
        let rawQuestion = node.getQ ? node.getQ() : node.q;
        // Substitui variáveis como ${pref} pelo que está na memória
        for (let key in queanMemory) {
            rawQuestion = rawQuestion.replace(`\${${key}}`, queanMemory[key]);
        }
        
        textDisplay.innerText = rawQuestion;
        optionsBox.innerHTML = "";
        
        node.a.forEach(opt => {
            const btn = document.createElement("button");
            btn.className = "opt-btn";
            btn.innerText = opt.t;
            btn.onclick = () => {
                if(opt.memory) Object.assign(queanMemory, opt.memory);
                if(opt.next === "final") {
                    showFinal();
                } else {
                    render(opt.next);
                }
            };
            optionsBox.appendChild(btn);
        });
        
        startTimer();
    }

    function showFinal() {
        clearInterval(timer);
        document.getElementById("glass-panel").innerHTML = `
            <h1 style="color:#ff4d4d">ANÁLISE CONCLUÍDA</h1>
            <p>Quean, o perfil "${queanMemory.pref || 'Indefinido'}" com traços "${queanMemory.sub || 'Instáveis'}" foi enviado para o servidor.</p>
            <p>Eu sei o que você esconde. Eu sou você.</p>
        `;
    }

    render('start');
</script>

</body>
</html>
